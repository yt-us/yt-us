(function(e){var t={extend:function(e,n){for(var r in n){if(typeof n[r]=="object"&&null!==n[r]){e[r]=t.extend(e[r]||{},n[r])}else{e[r]=n[r]}}return e},res_label:function(e){return/^\d+$/.test(e)?e+"p":e}};e.ResolutionMenuItem=e.MenuItem.extend({init:function(n,r){r.label=t.res_label(r.res);r.selected=r.res.toString()===n.getCurrentRes().toString();e.MenuItem.call(this,n,r);this.resolution=r.res;this.on("click",this.onClick);n.on("changeRes",e.bind(this,function(){if(this.resolution==n.getCurrentRes()){this.selected(true)}else{this.selected(false)}}))}});e.ResolutionMenuItem.prototype.onClick=function(){var e=this.player(),n=e.el().firstChild,r=e.currentTime(),i=e.paused(),s=e.controlBar.resolutionSelector.el().firstChild.children,o=s.length;if(e.getCurrentRes()==this.resolution){return}if("none"==n.preload){n.preload="metadata"}e.src(e.availableRes[this.resolution]).one("loadedmetadata",function(){e.currentTime(r);if(!i){e.play()}});e.currentRes=this.resolution;while(o>0){o--;if("vjs-current-res"==s[o].className){s[o].innerHTML=t.res_label(this.resolution);break}}e.trigger("changeRes")};e.ResolutionTitleMenuItem=e.MenuItem.extend({init:function(t,n){e.MenuItem.call(this,t,n);this.off("click")}});e.ResolutionSelector=e.MenuButton.extend({init:function(t,n){t.availableRes=n.available_res;e.MenuButton.call(this,t,n)}});e.ResolutionSelector.prototype.createItems=function(){var t=this.player(),n=[],r;n.push(new e.ResolutionTitleMenuItem(t,{el:e.Component.prototype.createEl("li",{className:"vjs-menu-title vjs-res-menu-title",innerHTML:"Quality"})}));for(r in t.availableRes){if("length"==r){continue}n.push(new e.ResolutionMenuItem(t,{res:r}))}n.sort(function(e,t){if(typeof e.resolution=="undefined"){return-1}else{return parseInt(t.resolution)-parseInt(e.resolution)}});return n};e.plugin("resolutionSelector",function(n){if(!this.el().firstChild.canPlayType){return}var r=this,i=r.options().sources,s=i.length,o,u,a=t.extend({default_res:null,force_types:false},n||{}),f={length:0},l,c;while(s>0){s--;if(!i[s]["data-res"]){continue}l=i[s]["data-res"];if(typeof f[l]!=="object"){f[l]=[];f.length++}f[l].push(i[s])}if(a.force_types){for(l in f){if("length"==l){continue}s=a.force_types.length;while(s>0){s--;o=f[l].length;found_types=0;while(o>0){o--;if(a.force_types[s]===f[l][o].type){found_types++}}if(found_types<a.force_types.length){delete f[l];f.length--;break}}}}if(f.length<2){return}if(a.default_res&&f[a.default_res]){r.src(f[a.default_res]);r.currentRes=a.default_res}r.getCurrentRes=function(){if(typeof r.currentRes!=="undefined"){return r.currentRes}else{try{return res=r.options().sources[0]["data-res"]}catch(e){return""}}};l=r.getCurrentRes();if(l){l=t.res_label(l)}c=new e.ResolutionSelector(r,{el:e.Component.prototype.createEl(null,{className:"vjs-res-button vjs-menu-button vjs-control",innerHTML:'<div class="vjs-control-content"><span class="vjs-current-res">'+(l||"Quality")+"</span></div>",role:"button","aria-live":"polite",tabIndex:0}),available_res:f});r.controlBar.resolutionSelector=r.controlBar.addChild(c)})})(videojs)
